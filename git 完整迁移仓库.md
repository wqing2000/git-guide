# git 完整迁移仓库

> 完整迁移，就是指，不仅将所有代码移植到新的仓库，而且要保留所有的commit记录

&nbsp;

* **随便找个文件夹，从原地址克隆一份裸版本库**

  ```bash
  git clone --bare 旧的git地址
  ```

  * 这个命令，会克隆远程仓库上git每一次的提交信息。然后在当前目录下产生一个`xxx.git`的文件夹

  * 和本地的代码没有关系，只要线上的代码是最新的，这个git版本就是完整的

* **推送裸版本库到新的地址**

  ```bash
  cd xxx.git
  git push --mirror 新的git地址
  ```

  * 会从远程仓库的镜像copy代码到新仓库

* **删掉xxx.git文件夹**

  * 代码复制成功，就可以删除了。

* **代码迁移成功，使用新的远程仓库地址**

  ```bash
  git clone 新的git地址
  ```

我试验不行，这样有一个疑问，新老仓库的账号，密码不一致，怎么同步这部分

windows有个凭据，push之前删掉凭据，会要求重新输账号密码，试试